还记得上周四在等班车时候，突然再想一个问题：等班车的同学都是如何安排时间等班车？自己就瞎捉摸着，想用一个简单的约束条件去模拟一下：

1.假设条件
1）班车最早发车时间为下班时间，如18:00，班车有最晚发车时间，如18:30；
2）班车座位是固定的，不会额外调整班车班次，如100个座位；
3）乘车同学对于班车位置选择没有要求；
4）乘车同学都是理性人，乘上班车的同学希望自己停留在班车上的时间最少，未乘上班车的同学需要提前乘车时间以保证下次乘上；

2.实际模拟
情况一：供>>求（即座位数远远满足同学的需求），结果发现较短的周期后，每个人都选择在最后时刻乘坐班车

模拟：假设需求量为50，这种情况下，50名同学乘车时间从随机分布到迅速收敛只需要5天左右时间，5天之后每位同学乘车时间基本上都集中在班车发车的最后一刻同时到达，因为他们知道只要18:30之前到达，都会有座位！
screenshot

情况二：供>求（即座位数稍微多于同学的需求），结果发现最终每个人还是会选择最后时刻乘坐班车，只是整个周期比情况一长

模拟：假设需求量为90，这种情况下，50名同学乘车时间从随机分布到收敛需要14天左右时间，14天之后每位同学乘车时间基本上都集中在班车发车的最后一刻同时到达，最后稳定状态基本上同情况一！
screenshot

情况三：供=求（即乘坐班车需求的同学数量正好合适），结果发现最终每个人还是会选择最后时刻乘坐班车，不过整个周期比情况二长

情况四：供<求（即乘坐班车的同学比实际座位数多一点），即使需求大于供给，但是结果发现最终每个人还是回选择最后时刻乘坐班车

模拟：假设需求量为105，发现实际发车时间随着迭代次数表现的趋势跟前三种相同，迭代次数越多，发车时间越接近最后节点，发现大概在55天左右，所有同学等班车时间接近稳定，约为18:30（实际模拟发现在需求/供给>1.06后，整个情况就发生大变化）；
screenshot

情况五：供<<求（即乘坐班车同学远远多于实际座位供应数），结果“市场”出现了“哄抢”现象，最终乘坐时间基本趋于最早时间而达到稳定

模拟：假设需求量为150，表现特征也是最终接近最早出发时间区域稳定，耗时45天左右。
screenshot

为了了解整体情况，自己想从前到后所有情况遍历一遍（上面选择了五种代表性场景，现在想准确计算更多需求/供给条件下的“市场”反映），模拟如下：（1）为了减少计算量，缩小需求和供给总量，供给量从100设置为20，需求量选择seq(2,40,step = 2)这20个点；（2）平衡点默认认为是某时刻所有人等车时间的标准差小于某个阈值，此处设置为1；通过计算得到如下结果：
图1.1 需求/供给~平衡点迭代次数

图1.2 需求/供给~平衡点位置
screenshot
结果分为两段：第一阶段，需求/供给<=1阶段，不管需求/供给比值如何变化，迭代次数基本相同，没有显著性差异，最终平稳时间也是接近于最迟上车时间；第二阶段，需求/供给>1阶段，整体服从possion分布，峰谷前和峰谷后表现差异较大，峰谷前市场稳定需要时间周期随着比值增长而显著递增，最终平衡点延续在第一阶段所处的位置，即18:30，峰谷后市场稳定需要时间周期随着比值增长而显著递减，最终平衡点延续在第一阶段所处的位置，即18:00，出现“市场哄抢”！ps：峰谷位置约在需求/供给=1.1位置；显著性“哄抢”出现在约需求/供给>=1.2；

3.思考
1）在理论情况下，供需不平等都会引起坐班车时间走向两个极端，只是时间周期长度不同；
2）需求/供给>1，不是一定都会出现“哄抢现象”。存在竞争，但是压力微乎其微，整体走势相反，在模拟中阈值线约为为1.1；
2）供需差异性影响着市场“哄抢”现象的发生。如现实生活中的房价，因为市场刺激和供给周期较长，导致商品房需求出现“哄抢”局面（需求/供给>=1.2）。房屋不如柴米油盐更新周期频繁，一旦部分需求得到满足，短时间没有新需求，再加上新一轮房屋供给周期（一般来说2-3年）到来，势必需求/供给比值大幅度上涨，引起“市场繁荣”消失，甚至连锁反应还会导致资金链、贷款等恶性循环；
3）现实情况下，供需差异一直是波动的，甚至有逆转现象，掌握清楚市场供需比情况，以及上几轮供需比产生的影响效应，对于预期下一期应该会有很重要的指导作用；

不多说了，我要赶班车了~~
